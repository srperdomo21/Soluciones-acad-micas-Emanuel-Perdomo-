<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Servicios acad√©micos</title>
    <style>
        :root{
            --bg1: #0f2027;
            --bg2: #203a43;
            --bg3: #2c5364;
            --glass: rgba(255,255,255,0.1);
            --glass-strong: rgba(255,255,255,0.9);
            --accent: #00f2fe;
            --accent-2: #4facfe;
            --wa: #25D366;
        }
        html,body{height:100%;}

        body {
            background: linear-gradient(135deg, var(--bg1), var(--bg2), var(--bg3));
            font-family: 'Segoe UI', Roboto, system-ui, -apple-system, "Helvetica Neue", Arial, sans-serif;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 560px;
            border: 1px solid rgba(255,255,255,0.12);
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }
        h1 { color: var(--accent); margin: 0; text-align: center; font-size: 1.6rem; }
        .slogan { color: var(--accent-2); font-style: italic; font-size: 0.95rem; text-align: center; margin-bottom: 18px; }

        .info-box {
            background: var(--glass-strong);
            color: #222;
            padding: 14px;
            border-radius: 12px;
            margin-bottom: 18px;
            font-size: 0.92rem;
            border-left: 6px solid #004a99;
        }

        form { margin-top: 6px; }
        .field {
            margin: 8px 0 14px;
        }
        label { display: block; margin-bottom: 6px; font-size: 0.95rem; color: var(--accent); }
        input[type="text"],
        input[type="tel"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: none;
            box-sizing: border-box;
            background: var(--glass-strong);
            font-size: 1rem;
            color: #111;
            outline: none;
        }
        select { appearance: none; }

        .row {
            display:flex;
            gap:10px;
        }
        .row .col { flex:1; }

        .meta {
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:8px;
            font-size:0.86rem;
            color:#e8f6ff;
        }
        .char-count { font-size:0.82rem; color:#cfefff; }

        .btn-wa {
            background: var(--wa);
            color: white;
            border: none;
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.25);
            transition: transform .12s ease, box-shadow .12s ease;
        }
        .btn-wa:active { transform: translateY(1px) scale(.995); }
        .btn-wa:focus { box-shadow: 0 6px 30px rgba(37,211,102,0.35); outline: none; }

        .toast {
            position: fixed;
            left: 50%;
            transform: translateX(-50%);
            bottom: 28px;
            background: rgba(0,0,0,0.75);
            color: #fff;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 0.95rem;
            display: none;
            z-index: 1000;
        }

        @media (max-width:480px){
            .container{ padding:20px; max-width: 420px; }
            h1{ font-size:1.25rem;}
        }
    </style>
</head>
<body>
<div class="container" role="main" aria-labelledby="titulo">
    <h1 id="titulo">Emanuel Perdomo</h1>
    <p class="slogan">"No te preocupes ni te estreses, somos la soluci√≥n a tus problemas"</p>

    <div class="info-box" aria-live="polite">
        <strong>üìù ¬øC√≥mo funciona?</strong><br>
        1. Elige tu servicio y detalla lo que necesitas.<br>
        2. Env√≠a el pedido por WhatsApp.<br>
        3. Te responder√© con el <b>presupuesto</b> y tiempo de entrega.
    </div>

    <form id="orderForm" onsubmit="return false;" aria-describedby="form-help">
        <div id="form-help" style="display:none">Formulario para solicitar presupuesto v√≠a WhatsApp</div>

        <div class="field">
            <label for="nombre">Nombre del Cliente</label>
            <input type="text" id="nombre" name="nombre" placeholder="Tu nombre completo" autocomplete="name" required aria-required="true">
        </div>

        <div class="row">
            <div class="col field">
                <label for="servicio">¬øQu√© necesitas?</label>
                <select id="servicio" name="servicio" aria-label="Servicio solicitado">
                    <option value="Diapositivas">Diapositivas (PowerPoint)</option>
                    <option value="P√°gina Web">P√°gina Web / Programas</option>
                    <option value="Trabajo en Word">Trabajo escrito (Word)</option>
                    <option value="Excel">Hojas de C√°lculo (Excel)</option>
                    <option value="Otro">Otro tipo de proyecto</option>
                </select>
            </div>

            <div class="col field">
                <label for="telefono">Tel√©fono (WhatsApp)</label>
                <input type="tel" id="telefono" name="telefono" placeholder="+1 829 957 5543" aria-describedby="telefono-help" inputmode="tel">
                <div id="telefono-help" class="meta" style="margin-top:6px;">
                    <span style="font-size:0.86rem;color:#dff6ff">Incluye c√≥digo de pa√≠s. Ej: 549112345678</span>
                </div>
            </div>
        </div>

        <div class="field">
            <label for="detalle">Detalles del trabajo (Cantidad de p√°ginas, tema, etc.)</label>
            <textarea id="detalle" name="detalle" rows="5" maxlength="2000" placeholder="Expl√≠came bien lo que necesitas para darte un precio justo..." required aria-required="true"></textarea>
            <div class="meta" style="margin-top:6px;">
                <span class="char-count" id="charCount">0 / 2000</span>
            </div>
        </div>

        <button type="button" class="btn-wa" id="submitBtn" onclick="enviarConsulta()" aria-label="Solicitar presupuesto por WhatsApp">
            üì≤ SOLICITAR PRESUPUESTO
        </button>
    </form>
</div>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<script>
    // Elementos
    const nombreEl = document.getElementById('nombre');
    const servicioEl = document.getElementById('servicio');
    const detalleEl = document.getElementById('detalle');
    const telefonoEl = document.getElementById('telefono');
    const toastEl = document.getElementById('toast');
    const charCountEl = document.getElementById('charCount');

    // Valor por defecto del tel√©fono (editable).
    // Mantengo el n√∫mero original como ejemplo sin el '+', WhatsApp requiere n√∫mero con c√≥digo de pa√≠s sin s√≠mbolos.
    telefonoEl.value = "18299575543";

    // Actualiza contador de caracteres
    detalleEl.addEventListener('input', () => {
        charCountEl.textContent = detalleEl.value.trim().length + " / " + detalleEl.maxLength;
    });

    // Muestra toast breve
    function showToast(message, ms = 2500) {
        toastEl.textContent = message;
        toastEl.style.display = 'block';
        setTimeout(() => {
            toastEl.style.display = 'none';
        }, ms);
    }

    // Validaci√≥n b√°sica del tel√©fono: elimina espacios y s√≠mbolos comunes
    function normalizePhone(raw) {
        if (!raw) return "";
        // Quitar espacios, par√©ntesis, guiones y + (WhatsApp API necesita n√∫mero en formato internacional sin signos)
        return raw.replace(/[\\s()+-]/g, '');
    }

    function enviarConsulta() {
        const nombre = nombreEl.value.trim();
        const servicio = servicioEl.value;
        const detalle = detalleEl.value.trim();
        const telefonoRaw = telefonoEl.value.trim();

        if (!nombre) {
            nombreEl.focus();
            showToast("Por favor indica tu nombre.");
            return;
        }
        if (!detalle) {
            detalleEl.focus();
            showToast("Por favor describe el trabajo.");
            return;
        }

        const telefono = normalizePhone(telefonoRaw);
        if (!/^[0-9]{8,15}$/.test(telefono)) {
            telefonoEl.focus();
            showToast("Tel√©fono inv√°lido. Incluye c√≥digo de pa√≠s sin s√≠mbolos.");
            return;
        }

        // Construye mensaje con encodeURIComponent para seguridad y formato correcto
        const mensajeLines = [
            "*SOLICITUD DE PRESUPUESTO*",
            "----------------------------",
            "üë§ *Cliente:* " + nombre,
            "üõ†Ô∏è *Servicio:* " + servicio,
            "üìù *Detalle:* " + detalle,
            "----------------------------",
            "_Hola Joan, ¬øqu√© precio tendr√≠a este trabajo?_"
        ];
        const mensaje = mensajeLines.join("\\n");
        const encoded = encodeURIComponent(mensaje);

        // URL de WhatsApp: usar wa.me/<phone>?text=<encoded>
        const waUrl = `https://wa.me/${telefono}?text=${encoded}`;

        // Abrir en nueva pesta√±a
        window.open(waUrl, '_blank');

        showToast("Abriendo WhatsApp...", 1800);
    }

    // Foco inicial accesible
    window.addEventListener('load', () => {
        nombreEl.focus();
        charCountEl.textContent = detalleEl.value.trim().length + " / " + detalleEl.maxLength;
    });

    // Permitir enviar con Ctrl+Enter dentro del textarea
    detalleEl.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
            enviarConsulta();
        }
    });
</script>
</body>
</html>